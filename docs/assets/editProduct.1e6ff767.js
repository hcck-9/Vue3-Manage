import{A as g}from"./index.a9c20b32.js";import{E as U}from"./el-overlay.a9414acf.js";import{E as q}from"./el-button.a91e83f6.js";import{E as k,a as w}from"./el-form-item.ef652a72.js";import{E as h}from"./el-input.50d72e9c.js";import"./el-tag.7c2e4455.js";import{E as R,a as I}from"./el-select.cb0e3f15.js";import{h as N}from"./setting.acd96df6.js";import{b as E}from"./mitt.dc7cd694.js";import{e as O}from"./product.2542ae59.js";import{_ as $,d as j,h as p,ae as L,i as f,ay as M,o as i,$ as F,w as l,e as b,j as o,a as S,c as T,F as z,ax as G}from"./index.ea4bb737.js";import"./focus-trap.81366787.js";import"./use-form-item.94301b5b.js";import"./castArray.11eccfc8.js";import"./_baseClone.98dedeff.js";import"./_initCloneObject.9d0b46bd.js";import"./strings.7bfc8dd9.js";const H={class:"dialog-content"},J={class:"dialog-footer"},K=j({__name:"editProduct",emits:["success"],setup(Q,{expose:V,emit:B}){const n=p(!1),C=p("right");L(()=>{E.all.clear()});const _=p([]);(async()=>{const r=await N();_.value=r.data})();const c=p(),e=f({id:null,product_id:null,product_name:"",product_category:"",product_unit:"",product_in_warehouse_number:null,product_single_price:null,product_create_person:"",in_memo:""}),v=f({product_id:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u5165\u5E93\u7684\u7F16\u53F7",trigger:["change","blur"]}],product_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u5165\u5E93\u540D\u79F0",trigger:["change","blur"]}],product_category:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u7C7B\u522B",trigger:["change","blur"]}],product_unit:[{required:!0,message:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u5355\u4F4D",trigger:["change","blur"]}],product_in_warehouse_number:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u5E93\u5B58\u6570\u91CF",trigger:["change","blur"]}],product_single_price:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u5355\u4EF7",trigger:["change","blur"]}],product_create_person:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u5165\u5E93\u8D1F\u8D23\u4EBA",trigger:["change","blur"]}]});E.on("editProductRow",r=>{r=M(r),e.id=r.id,e.product_id=r.product_id,e.product_name=r.product_name,e.product_category=r.product_category,e.product_unit=r.product_unit,e.product_in_warehouse_number=r.product_in_warehouse_number,e.product_single_price=r.product_single_price,e.product_create_person=r.product_create_person,e.in_memo=r.in_memo});const A=B,y=async r=>{!r||await r.validate(async u=>{if(u){const a=await O(e);a.data.status===0?(g({message:a.data.message,type:"success"}),A("success"),n.value=!1):g.error(a.data.message)}})};return V({open:()=>{n.value=!0}}),(r,u)=>{const a=h,d=k,s=R,m=I,D=w,x=q,P=U;return i(),F(P,{modelValue:n.value,"onUpdate:modelValue":u[9]||(u[9]=t=>n.value=t),title:"\u7F16\u8F91\u4EA7\u54C1",width:"600px"},{footer:l(()=>[b("span",J,[o(x,{type:"primary",onClick:u[8]||(u[8]=t=>y(c.value))},{default:l(()=>[S(" \u786E\u5B9A ")]),_:1})])]),default:l(()=>[b("div",H,[o(D,{ref_key:"editProductRef",ref:c,"label-position":C.value,model:e,rules:v,"label-width":"120px"},{default:l(()=>[o(d,{label:"\u5165\u5E93\u7F16\u53F7",prop:"product_id"},{default:l(()=>[o(a,{modelValue:e.product_id,"onUpdate:modelValue":u[0]||(u[0]=t=>e.product_id=t),disabled:""},null,8,["modelValue"])]),_:1}),o(d,{label:"\u4EA7\u54C1\u540D\u79F0",prop:"product_name"},{default:l(()=>[o(a,{modelValue:e.product_name,"onUpdate:modelValue":u[1]||(u[1]=t=>e.product_name=t)},null,8,["modelValue"])]),_:1}),o(d,{label:"\u4EA7\u54C1\u7C7B\u522B",prop:"product_category"},{default:l(()=>[o(m,{modelValue:e.product_category,"onUpdate:modelValue":u[2]||(u[2]=t=>e.product_category=t),placeholder:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u7C7B\u522B"},{default:l(()=>[(i(!0),T(z,null,G(_.value,t=>(i(),F(s,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"\u4EA7\u54C1\u5355\u4F4D",prop:"product_unit"},{default:l(()=>[o(m,{modelValue:e.product_unit,"onUpdate:modelValue":u[3]||(u[3]=t=>e.product_unit=t),placeholder:"\u8BF7\u9009\u62E9\u4EA7\u54C1\u5355\u4F4D"},{default:l(()=>[o(s,{label:"\u4E2A",value:"\u4E2A"}),o(s,{label:"\u4EF6",value:"\u4EF6"})]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"\u5E93\u5B58\u6570\u91CF",prop:"product_in_warehouse_number"},{default:l(()=>[o(a,{modelValue:e.product_in_warehouse_number,"onUpdate:modelValue":u[4]||(u[4]=t=>e.product_in_warehouse_number=t)},null,8,["modelValue"])]),_:1}),o(d,{label:"\u4EA7\u54C1\u5355\u4EF7(\u5355\u4F4D)",prop:"product_single_price"},{default:l(()=>[o(a,{modelValue:e.product_single_price,"onUpdate:modelValue":u[5]||(u[5]=t=>e.product_single_price=t)},null,8,["modelValue"])]),_:1}),o(d,{label:"\u5165\u5E93\u8D1F\u8D23\u4EBA",prop:"product_create_person"},{default:l(()=>[o(a,{modelValue:e.product_create_person,"onUpdate:modelValue":u[6]||(u[6]=t=>e.product_create_person=t),disabled:""},null,8,["modelValue"])]),_:1}),o(d,{label:"\u5165\u5E93\u5907\u6CE8",prop:"in_memo"},{default:l(()=>[o(a,{type:"textarea",modelValue:e.in_memo,"onUpdate:modelValue":u[7]||(u[7]=t=>e.in_memo=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["label-position","model","rules"])])]),_:1},8,["modelValue"])}}});var ge=$(K,[["__scopeId","data-v-6454c72a"]]);export{ge as default};
