import{A as i}from"./index.a9c20b32.js";import{E as x}from"./el-overlay.a9414acf.js";import{E as C}from"./el-button.a91e83f6.js";import{E as w,a as D}from"./el-form-item.ef652a72.js";import{E as P}from"./el-input.50d72e9c.js";import{b as m}from"./mitt.dc7cd694.js";import{a as U}from"./product.2542ae59.js";import{_ as h,d as k,h as n,ae as q,i as c,ay as I,o as R,$ as N,w as r,e as s,j as t,a as O,t as f}from"./index.ea4bb737.js";import"./focus-trap.81366787.js";import"./use-form-item.94301b5b.js";import"./castArray.11eccfc8.js";import"./_baseClone.98dedeff.js";import"./_initCloneObject.9d0b46bd.js";const S={class:"product-name"},$={class:"product-name"},j={class:"dialog-content"},M={class:"dialog-footer"},T=k({__name:"applyProduct",emits:["success"],setup(z,{expose:g,emit:b}){const d=n(!1),F=n("right");q(()=>{m.all.clear()});const _=n(),e=c({id:null,product_out_id:null,product_out_number:null,product_out_apply_person:localStorage.getItem("name"),audit_memo:"",product_in_warehouse_number:null,product_name:"",product_single_price:null}),E=c({product_out_id:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u51FA\u5E93\u7684\u7F16\u53F7",trigger:["change","blur"]}],product_out_number:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u51FA\u5E93\u540D\u79F0",trigger:["change","blur"]}],product_out_apply_person:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EA7\u54C1\u51FA\u5E93\u8D1F\u8D23\u4EBA",trigger:["change","blur"]}],product_single_price:[{required:!0}]});m.on("applyRow",a=>{a=I(a),e.id=a.id,e.product_in_warehouse_number=a.product_in_warehouse_number,e.product_name=a.product_name,e.product_single_price=a.product_single_price});const y=b,A=async a=>{!a||await a.validate(async u=>{if(u){const l=await U(e);l.data.status===0?(i({message:l.data.message,type:"success"}),y("success"),d.value=!1):i.error(l.data.message)}})};return g({open:()=>{d.value=!0}}),(a,u)=>{const l=P,p=w,V=D,v=C,B=x;return R(),N(B,{modelValue:d.value,"onUpdate:modelValue":u[6]||(u[6]=o=>d.value=o),title:"\u7533\u8BF7\u51FA\u5E93",width:"600px","align-center":"",draggable:""},{footer:r(()=>[s("span",M,[t(v,{type:"primary",onClick:u[5]||(u[5]=o=>A(_.value)),disabled:e.product_out_number>e.product_in_warehouse_number},{default:r(()=>[O(" \u786E\u5B9A ")]),_:1},8,["disabled"])])]),default:r(()=>[s("div",S,"\u60A8\u7533\u8BF7\u51FA\u5E93\u7684\u4EA7\u54C1\u662F:\xA0\xA0"+f(e.product_name),1),s("div",$," \u8BE5\u4EA7\u54C1\u7684\u5E93\u5B58\u8FD8\u6709:\xA0\xA0"+f(e.product_in_warehouse_number),1),s("div",j,[t(V,{ref_key:"applyProductRef",ref:_,"label-position":F.value,model:e,rules:E,"label-width":"120px"},{default:r(()=>[t(p,{label:"\u7533\u8BF7\u51FA\u5E93\u7F16\u53F7",prop:"product_out_id"},{default:r(()=>[t(l,{modelValue:e.product_out_id,"onUpdate:modelValue":u[0]||(u[0]=o=>e.product_out_id=o)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u51FA\u5E93\u6570\u91CF",prop:"product_out_number"},{default:r(()=>[t(l,{modelValue:e.product_out_number,"onUpdate:modelValue":u[1]||(u[1]=o=>e.product_out_number=o)},null,8,["modelValue"])]),_:1}),t(p,{label:"\u4EA7\u54C1\u5355\u4EF7",prop:"product_single_price"},{default:r(()=>[t(l,{modelValue:e.product_single_price,"onUpdate:modelValue":u[2]||(u[2]=o=>e.product_single_price=o),disabled:""},null,8,["modelValue"])]),_:1}),t(p,{label:"\u51FA\u5E93\u7533\u8BF7\u4EBA",prop:"product_out_apply_person"},{default:r(()=>[t(l,{modelValue:e.product_out_apply_person,"onUpdate:modelValue":u[3]||(u[3]=o=>e.product_out_apply_person=o),disabled:""},null,8,["modelValue"])]),_:1}),t(p,{label:"\u51FA\u5E93\u5907\u6CE8",prop:"in_memo"},{default:r(()=>[t(l,{type:"textarea",modelValue:e.audit_memo,"onUpdate:modelValue":u[4]||(u[4]=o=>e.audit_memo=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["label-position","model","rules"])])]),_:1},8,["modelValue"])}}});var ae=h(T,[["__scopeId","data-v-13209bfa"]]);export{ae as default};
