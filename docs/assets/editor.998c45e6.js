import{A as d}from"./index.a9c20b32.js";import{E as V}from"./el-overlay.a9414acf.js";import{E as h}from"./el-button.a91e83f6.js";import{T as x,E as w}from"./index.esm.37433279.js";import{b as p}from"./mitt.dc7cd694.js";import{b as a,i as k}from"./setting.acd96df6.js";import{d as N,h as c,s as A,i as T,ae as U,o as I,$ as L,w as s,e as C,j as r,a as E,u as g}from"./index.ea4bb737.js";import"./focus-trap.81366787.js";import"./use-form-item.94301b5b.js";const H={style:{border:"1px solid #ccc"}},K={class:"dialog-footer"},J=N({__name:"editor",setup(M,{expose:v}){const u=c(),t=c();p.on("editorTitle",async e=>{if(e==1){u.value="\u7F16\u8F91\u516C\u53F8\u4ECB\u7ECD";const o=await a("\u516C\u53F8\u4ECB\u7ECD");t.value=o.data}if(e==2){u.value="\u7F16\u8F91\u516C\u53F8\u67B6\u6784";const o=await a("\u516C\u53F8\u67B6\u6784");t.value=o.data}if(e==3){u.value="\u7F16\u8F91\u516C\u53F8\u6218\u7565";const o=await a("\u516C\u53F8\u6218\u7565");t.value=o.data}if(e==4){u.value="\u7F16\u8F91\u9AD8\u5C42\u4ECB\u7ECD";const o=await a("\u9AD8\u5C42\u4ECB\u7ECD");t.value=o.data}});const i=A(),m=c("default"),f={excludeKeys:[]},b={placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9...",MENU_CONF:{uploadImage:{server:"http://127.0.0.1:3007/set/uploadCompanyPicture",fieldName:"file",methods:"post",metaWithUrl:!0,customInsert(e,o){o(e.url)}}}};f.excludeKeys=["blockquote","bgColor","color","group-more-style","fontFamily","bulletedList","numberedList","lineHeight","todo","emotion","insertLink","group-video","insertTable","codeBlock","divider","fullScreen"];const B=async()=>{console.log(u.value.slice(-4));const e=await k(t.value,u.value.slice(-4));console.log(e),e.status==0?(d({message:"\u4FEE\u6539\u516C\u53F8\u4ECB\u7ECD\u6210\u529F\uFF01",type:"success"}),l.dialogFormVisible=!1):(l.dialogFormVisible=!1,d.error("\u4FEE\u6539\u516C\u53F8\u4ECB\u7ECD\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u662F\u5426\u901A\u7545\uFF01"))},y=e=>{i.value=e},l=T({dialogFormVisible:!1}),_=()=>{d.error("\u53D6\u6D88\u8D4B\u6743\uFF01"),l.dialogFormVisible=!1};return v({open:()=>{l.dialogFormVisible=!0}}),U(()=>{const e=i.value;e!=null&&(e.destroy(),p.all.clear())}),(e,o)=>{const F=h,D=V;return I(),L(D,{modelValue:l.dialogFormVisible,"onUpdate:modelValue":o[1]||(o[1]=n=>l.dialogFormVisible=n),title:u.value,width:"600px","destroy-on-close":""},{footer:s(()=>[C("span",K,[r(F,{onClick:_},{default:s(()=>[E("\u53D6\u6D88")]),_:1}),r(F,{type:"primary",onClick:B},{default:s(()=>[E(" \u786E\u8BA4 ")]),_:1})])]),default:s(()=>[C("div",H,[r(g(x),{style:{"border-bottom":"1px solid #ccc"},editor:i.value,defaultConfig:f,mode:m.value},null,8,["editor","mode"]),r(g(w),{style:{height:"300px","overflow-y":"hidden"},modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=n=>t.value=n),defaultConfig:b,mode:m.value,onOnCreated:y},null,8,["modelValue","mode"])])]),_:1},8,["modelValue","title"])}}});export{J as default};
